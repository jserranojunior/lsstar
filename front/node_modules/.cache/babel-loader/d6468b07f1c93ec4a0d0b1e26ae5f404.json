{"remainingRequest":"/opt/lampp/htdocs/intellect/front/node_modules/babel-loader/lib/index.js!/opt/lampp/htdocs/intellect/front/node_modules/eslint-loader/index.js??ref--13-0!/opt/lampp/htdocs/intellect/front/src/modules/auth/vuex/AuthActions.js","dependencies":[{"path":"/opt/lampp/htdocs/intellect/front/src/modules/auth/vuex/AuthActions.js","mtime":1580062854235},{"path":"/opt/lampp/htdocs/intellect/front/node_modules/cache-loader/dist/cjs.js","mtime":1578848123391},{"path":"/opt/lampp/htdocs/intellect/front/node_modules/babel-loader/lib/index.js","mtime":1576704838626},{"path":"/opt/lampp/htdocs/intellect/front/node_modules/eslint-loader/index.js","mtime":1576704844214}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvb3B0L2xhbXBwL2h0ZG9jcy9pbnRlbGxlY3QvZnJvbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgdmFyIGF1dGhlbnRpY2F0ZSA9IGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZShfcmVmLCBkYXRhKSB7CiAgdmFyIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICByZXR1cm4gbmV3IFByb21pc2UoCiAgLyojX19QVVJFX18qLwogIGZ1bmN0aW9uICgpIHsKICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlLCByZWplY3QpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly8xMjcuMC4wLjE6MzMzMy9hdXRoZW50aWNhdGUnLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ0FjdGlvblNldFRva2VuJywgcmVzcG9uc2UuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94LCBfeDIpIHsKICAgICAgcmV0dXJuIF9yZWYyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0oKSk7Cn07CmV4cG9ydCB2YXIgZ2V0VXNlciA9IGZ1bmN0aW9uIGdldFVzZXIoX3JlZjMpIHsKICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogIHJldHVybiBuZXcgUHJvbWlzZSgKICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMihyZXNvbHZlLCByZWplY3QpIHsKICAgICAgdmFyIG9wdGlvbnM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIGJhc2VVUkw6ICdodHRwOi8vbG9jYWxob3N0OjMzMzMnLAogICAgICAgICAgICAgICAgdGltZW91dDogMTAwMCwKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAnQmVhcmVyICcgKyBzdGF0ZS50b2tlbgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgYXhpb3MuZ2V0KCcvdXNlcicsIG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBjb21taXQoJ1VTRVInLCByZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMik7CiAgICB9KSk7CgogICAgcmV0dXJuIGZ1bmN0aW9uIChfeDMsIF94NCkgewogICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKTsKfTsKZXhwb3J0IHZhciBBY3Rpb25DaGVja1Rva2VuID0gZnVuY3Rpb24gQWN0aW9uQ2hlY2tUb2tlbihfcmVmNSkgewogIHZhciBkaXNwYXRjaCA9IF9yZWY1LmRpc3BhdGNoLAogICAgICBzdGF0ZSA9IF9yZWY1LnN0YXRlOwoKICBpZiAoc3RhdGUudG9rZW4pIHsKICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoc3RhdGUudG9rZW4pOwogIH0KCiAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CgogIGlmICghdG9rZW4gfHwgdG9rZW4gPT0gInVuZGVmaW5lZCIgfHwgdG9rZW4gPT0gIm51bGwiIHx8IHRva2VuID09ICIiKSB7CiAgICB0b2tlbiA9IGZhbHNlOwogIH0KCiAgaWYgKCF0b2tlbikgewogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignVG9rZW4gSW52w6FsaWRvJykpOwogIH0KCiAgaWYgKHRva2VuIHx8IHRva2VuICE9PSAidW5kZWZpbmVkIiB8fCB0b2tlbiAhPT0gIiIgfHwgdG9rZW4gIT09ICJudWxsIikgewogICAgcmV0dXJuIGRpc3BhdGNoKCdBY3Rpb25TZXRUb2tlbicsIHRva2VuKTsKICB9Cn07CmV4cG9ydCB2YXIgQWN0aW9uU2V0VG9rZW4gPSBmdW5jdGlvbiBBY3Rpb25TZXRUb2tlbihfcmVmNiwgcGF5bG9hZCkgewogIHZhciBjb21taXQgPSBfcmVmNi5jb21taXQsCiAgICAgIGRpc3BhdGNoID0gX3JlZjYuZGlzcGF0Y2g7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcGF5bG9hZCk7CiAgY29tbWl0KCdBVVRIRU5USUNBVEUnLCBwYXlsb2FkKTsKICBkaXNwYXRjaCgnZ2V0VXNlcicsICcnKTsKfTsgLy8gZXhwb3J0IGNvbnN0IEFjdGlvblNldFVzZXIgPSAoeyBjb21taXR9LCBwYXlsb2FkKSA9PiB7Ci8vICAgY29tbWl0KCdVU0VSJywgcGF5bG9hZCkKLy8gfQoKZXhwb3J0IHZhciBMb2dvdXQgPSBmdW5jdGlvbiBMb2dvdXQoX3JlZjcpIHsKICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0OwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsICcnKTsKICBjb21taXQoJ0FVVEhFTlRJQ0FURScsICcnKTsKICBjb21taXQoJ1VTRVInLCAnJyk7Cn07"},{"version":3,"sources":["/opt/lampp/htdocs/intellect/front/src/modules/auth/vuex/AuthActions.js"],"names":["axios","authenticate","data","dispatch","Promise","resolve","reject","post","then","response","token","catch","error","console","log","getUser","commit","state","options","baseURL","timeout","headers","get","ActionCheckToken","localStorage","getItem","Error","ActionSetToken","payload","setItem","Logout"],"mappings":"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","sourcesContent":["import axios from \"axios\"\n\n  export const authenticate = ({dispatch}, data) => {\n    return new Promise(async (resolve, reject) => {    \n            axios.post('http://127.0.0.1:3333/authenticate', data)\n            .then(function (response) {\n                dispatch('ActionSetToken', response.data.token)             \n                                              \n                resolve() \n            })\n            .catch(function (error) {\n                console.log(error)\n                console.log(error.response); \n                reject(error)           \n            })  \n    })\n  }\n  export const getUser = ({ commit, state }) => {\n    return new Promise(async (resolve, reject) => {           \n        const options = {\n                    baseURL: 'http://localhost:3333',\n                    timeout: 1000,\n                    headers: {\n                      'Authorization': 'Bearer ' + state.token\n                    }\n                  }             \n            axios.get('/user', options)\n            .then(function (response) {                \n                commit('USER', response.data)      \n                resolve() \n            })\n            .catch(function (error) {\n                console.log(error)\n                console.log(error.response); \n                reject(error)           \n            })  \n    })\n  }\n\n  export const ActionCheckToken = ({ dispatch, state }) => {  \n    if (state.token) {     \n      return Promise.resolve(state.token)\n    }\n    var token = localStorage.getItem('token')\n    if(!token || token == \"undefined\" || token == \"null\" || token == \"\"){\n      token = false\n    }\n    if (!token) { \n      return Promise.reject(new Error('Token InvÃ¡lido'))\n    }\n    if(token || token !== \"undefined\" || token !== \"\" || token !== \"null\"){       \n      return dispatch('ActionSetToken', token)    \n        \n    }   \n  }\n \n\n  export const ActionSetToken = ({ commit, dispatch}, payload) => {\n    localStorage.setItem('token', payload)   \n    commit('AUTHENTICATE', payload) \n    dispatch('getUser', '')  \n  }\n\n  // export const ActionSetUser = ({ commit}, payload) => {\n  //   commit('USER', payload)\n  // }\n\n  export const Logout = ({ commit}) => {\n    localStorage.setItem('token', '')\n    commit('AUTHENTICATE', '') \n    commit('USER', '')\n  }\n  "]}]}