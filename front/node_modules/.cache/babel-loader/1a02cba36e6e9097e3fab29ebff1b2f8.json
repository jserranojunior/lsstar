{"remainingRequest":"/opt/lampp/htdocs/lsstar/front/node_modules/thread-loader/dist/cjs.js!/opt/lampp/htdocs/lsstar/front/node_modules/babel-loader/lib/index.js!/opt/lampp/htdocs/lsstar/front/node_modules/eslint-loader/index.js??ref--13-0!/opt/lampp/htdocs/lsstar/front/src/modules/auth/vuex/AuthActions.js","dependencies":[{"path":"/opt/lampp/htdocs/lsstar/front/src/modules/auth/vuex/AuthActions.js","mtime":1580062854235},{"path":"/opt/lampp/htdocs/lsstar/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/lsstar/front/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/lsstar/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/opt/lampp/htdocs/lsstar/front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9vcHQvbGFtcHAvaHRkb2NzL2xzc3Rhci9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmV4cG9ydCB2YXIgYXV0aGVudGljYXRlID0gZnVuY3Rpb24gYXV0aGVudGljYXRlKF9yZWYsIGRhdGEpIHsKICB2YXIgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoOwogIHJldHVybiBuZXcgUHJvbWlzZSgKICAvKiNfX1BVUkVfXyovCiAgZnVuY3Rpb24gKCkgewogICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc29sdmUsIHJlamVjdCkgewogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYXhpb3MucG9zdCgnaHR0cDovLzEyNy4wLjAuMTozMzMzL2F1dGhlbnRpY2F0ZScsIGRhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnQWN0aW9uU2V0VG9rZW4nLCByZXNwb25zZS5kYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpOwoKICAgIHJldHVybiBmdW5jdGlvbiAoX3gsIF94MikgewogICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH07CiAgfSgpKTsKfTsKZXhwb3J0IHZhciBnZXRVc2VyID0gZnVuY3Rpb24gZ2V0VXNlcihfcmVmMykgewogIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgcmV0dXJuIG5ldyBQcm9taXNlKAogIC8qI19fUFVSRV9fKi8KICBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlc29sdmUsIHJlamVjdCkgewogICAgICB2YXIgb3B0aW9uczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBvcHRpb25zID0gewogICAgICAgICAgICAgICAgYmFzZVVSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MzMzMycsCiAgICAgICAgICAgICAgICB0aW1lb3V0OiAxMDAwLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICdCZWFyZXIgJyArIHN0YXRlLnRva2VuCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBheGlvcy5nZXQoJy91c2VyJywgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgIGNvbW1pdCgnVVNFUicsIHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UpOwogICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKTsKCiAgICByZXR1cm4gZnVuY3Rpb24gKF94MywgX3g0KSB7CiAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfTsKICB9KCkpOwp9OwpleHBvcnQgdmFyIEFjdGlvbkNoZWNrVG9rZW4gPSBmdW5jdGlvbiBBY3Rpb25DaGVja1Rva2VuKF9yZWY1KSB7CiAgdmFyIGRpc3BhdGNoID0gX3JlZjUuZGlzcGF0Y2gsCiAgICAgIHN0YXRlID0gX3JlZjUuc3RhdGU7CgogIGlmIChzdGF0ZS50b2tlbikgewogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShzdGF0ZS50b2tlbik7CiAgfQoKICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKCiAgaWYgKCF0b2tlbiB8fCB0b2tlbiA9PSAidW5kZWZpbmVkIiB8fCB0b2tlbiA9PSAibnVsbCIgfHwgdG9rZW4gPT0gIiIpIHsKICAgIHRva2VuID0gZmFsc2U7CiAgfQoKICBpZiAoIXRva2VuKSB7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdUb2tlbiBJbnbDoWxpZG8nKSk7CiAgfQoKICBpZiAodG9rZW4gfHwgdG9rZW4gIT09ICJ1bmRlZmluZWQiIHx8IHRva2VuICE9PSAiIiB8fCB0b2tlbiAhPT0gIm51bGwiKSB7CiAgICByZXR1cm4gZGlzcGF0Y2goJ0FjdGlvblNldFRva2VuJywgdG9rZW4pOwogIH0KfTsKZXhwb3J0IHZhciBBY3Rpb25TZXRUb2tlbiA9IGZ1bmN0aW9uIEFjdGlvblNldFRva2VuKF9yZWY2LCBwYXlsb2FkKSB7CiAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdCwKICAgICAgZGlzcGF0Y2ggPSBfcmVmNi5kaXNwYXRjaDsKICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCBwYXlsb2FkKTsKICBjb21taXQoJ0FVVEhFTlRJQ0FURScsIHBheWxvYWQpOwogIGRpc3BhdGNoKCdnZXRVc2VyJywgJycpOwp9OyAvLyBleHBvcnQgY29uc3QgQWN0aW9uU2V0VXNlciA9ICh7IGNvbW1pdH0sIHBheWxvYWQpID0+IHsKLy8gICBjb21taXQoJ1VTRVInLCBwYXlsb2FkKQovLyB9CgpleHBvcnQgdmFyIExvZ291dCA9IGZ1bmN0aW9uIExvZ291dChfcmVmNykgewogIHZhciBjb21taXQgPSBfcmVmNy5jb21taXQ7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgJycpOwogIGNvbW1pdCgnQVVUSEVOVElDQVRFJywgJycpOwogIGNvbW1pdCgnVVNFUicsICcnKTsKfTs="},{"version":3,"sources":["/opt/lampp/htdocs/lsstar/front/src/modules/auth/vuex/AuthActions.js"],"names":["axios","authenticate","data","dispatch","Promise","resolve","reject","post","then","response","token","catch","error","console","log","getUser","commit","state","options","baseURL","timeout","headers","get","ActionCheckToken","localStorage","getItem","Error","ActionSetToken","payload","setItem","Logout"],"mappings":"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","sourcesContent":["import axios from \"axios\"\n\n  export const authenticate = ({dispatch}, data) => {\n    return new Promise(async (resolve, reject) => {    \n            axios.post('http://127.0.0.1:3333/authenticate', data)\n            .then(function (response) {\n                dispatch('ActionSetToken', response.data.token)             \n                                              \n                resolve() \n            })\n            .catch(function (error) {\n                console.log(error)\n                console.log(error.response); \n                reject(error)           \n            })  \n    })\n  }\n  export const getUser = ({ commit, state }) => {\n    return new Promise(async (resolve, reject) => {           \n        const options = {\n                    baseURL: 'http://localhost:3333',\n                    timeout: 1000,\n                    headers: {\n                      'Authorization': 'Bearer ' + state.token\n                    }\n                  }             \n            axios.get('/user', options)\n            .then(function (response) {                \n                commit('USER', response.data)      \n                resolve() \n            })\n            .catch(function (error) {\n                console.log(error)\n                console.log(error.response); \n                reject(error)           \n            })  \n    })\n  }\n\n  export const ActionCheckToken = ({ dispatch, state }) => {  \n    if (state.token) {     \n      return Promise.resolve(state.token)\n    }\n    var token = localStorage.getItem('token')\n    if(!token || token == \"undefined\" || token == \"null\" || token == \"\"){\n      token = false\n    }\n    if (!token) { \n      return Promise.reject(new Error('Token InvÃ¡lido'))\n    }\n    if(token || token !== \"undefined\" || token !== \"\" || token !== \"null\"){       \n      return dispatch('ActionSetToken', token)    \n        \n    }   \n  }\n \n\n  export const ActionSetToken = ({ commit, dispatch}, payload) => {\n    localStorage.setItem('token', payload)   \n    commit('AUTHENTICATE', payload) \n    dispatch('getUser', '')  \n  }\n\n  // export const ActionSetUser = ({ commit}, payload) => {\n  //   commit('USER', payload)\n  // }\n\n  export const Logout = ({ commit}) => {\n    localStorage.setItem('token', '')\n    commit('AUTHENTICATE', '') \n    commit('USER', '')\n  }\n  "]}]}